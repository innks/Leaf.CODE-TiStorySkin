!function(t){t.fn.DynamicScrollspy=function(i){if(i=void 0===i?{}:i,this.isinit=void 0!==this.isinit&&e.isinit,"destroy"==i)return this.isinit=!1,this.empty(),this.off("activate.bs.scrollspy"),t("body").removeAttr("data-spy"),this;this.options=t.extend({},{affix:!1,tH:2,bH:6,exclude:!1,genIDs:!1,offset:100,ulClassNames:"hidden-print",activeClass:"",testing:!1,hMark:!0},this.options,i);var e=this;function n(i){return t("<div></div>").text(i).html()}function r(){for(var i=[],n=e.options.tH;n<=e.options.bH;n++)i.push("H"+n);return t(i.join(",")).not(e.options.exclude)}function s(){r().prop("id",function(){return""===t(this).prop("id")?t(this).prop("tagName")+function(){var t;function i(){t=Math.floor(900*Math.random())+100}for(i();e.rands.indexOf(t)>=0;)i();return e.rands.push(t),t}():t(this).prop("id")})}function o(){var i=e.tree;return t("H"+e.options.tH).not(e.options.exclude).each(function(){var r,s=t(this).html();if(e.options.hMark&&s.substr(0,s.length),s.includes("<i")){var o=s.substr(s.indexOf("<i"),s.indexOf("</i>")+4-s.indexOf("<i"));s=s.replace(o,"")}var a=s.trim().replace("<em>","").replace("</em>","").replace("<code>","").replace("</code>","");r=a.includes("&")?a.substr(0,a.indexOf("&")):a.includes("<")?a.substr(0,a.indexOf("<")):a,i[t(this).prop("id")]={dstext:n(r),jqel:t(this)}}),e.options.tH+1<=e.options.bH&&function i(r){for(var s in r)if(""!==s&&"dstext"!=s&&"jqel"!=s){var o=Number(t("#"+s).prop("tagName").replace("H",""));if(o>=e.options.bH)return!1;t("#"+s).nextUntil("H"+o).filter("H"+(o+1)).not(e.options.exclude).each(function(){var i,o=t(this).html();if(e.options.hMark&&o.substr(0,o.length),o.includes("<i")){var a=o.substr(o.indexOf("<i"),o.indexOf("</i>")+4-o.indexOf("<i"));o=o.replace(a,"")}var p=o.trim().replace("<em>","").replace("</em>","").replace("<code>","").replace("</code>","");i=p.includes("&")?p.substr(0,p.indexOf("&")):p.includes("<")?p.substr(0,p.indexOf("<")):p,r[s][t(this).prop("id")]={dstext:n(i),jqel:t(this)}}),o<e.options.bH&&i(r[s])}}(i),i}function a(){var i=t('<ul class="nav '+e.options.ulClassNames+'"></ul>');return e.append(i),t.each(e.tree,function(n){var r='<li id="AoK-'+n+'" class="nav-item"><a href="#'+n+'" onclick="tocHGo('+n+'); return false;" class="nav-link">'+e.tree[n].dstext+"</a></li>";i.append(r),function i(e){if(Object.keys(e).length<3)return!1;var n=t("#AoK-"+e.jqel.prop("id"));var r=t("<ul class='nav child'></ul>");n.append(r);for(var s in e)if("dstext"!=s&&"jqel"!=s){var o=e[s];r.append('<li id="AoK-'+s+'" class="nav-item"><a href="#'+s+'" onclick="tocHGo('+s+'); return false;" class="nav-link">'+o.dstext+"</a></li>"),i(e[s])}}(e.tree[n])}),e}return this.tree={},this.rands=[],function(){if(!1===e.isinit){if(e.options.genIDs?s():function(){var i=0;if(r().each(function(){if(""===t(this).prop("id"))i++;else if(t('[id="'+t(this).prop("id")+'"]').length>1)throw new Error("DynamicScrollspy: Error! Duplicate id "+t(this).prop("id"))}),i>0)throw new Error("DynamicScrollspy: Not all headers have ids and genIDs: false.")}(),e.options.testing&&r().append(function(){return" ("+t(this).prop("tagName")+", "+t(this).prop("id")+")"}),e.options.hMark&&r().append(function(){return' <a class="ak-h-'+t(this).prop("tagName")+'" href="#'+t(this).prop("id")+'">#</a>'}),o(),a(),e.options.affix&&"function"==typeof e.children("ul").affix){var i=e.children("ul");e.children("ul").affix({offset:{top:function(){var n=i.offset().top,r=parseInt(i.children(0).css("margin-top"),10),s=t(e).height();return this.top=n-s-r},bottom:function(){return this.bottom=t(e).outerHeight(!0)}}})}t("body").attr("data-spy","true").scrollspy({target:"#"+e.prop("id"),offset:e.options.offset}),e.isinit=!0}else o(),a(),t('[data-spy="scroll"]').each(function(){t(this).scrollspy("refresh")});return e}()}}(jQuery);